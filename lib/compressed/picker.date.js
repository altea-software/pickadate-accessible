/*!
 * Date picker for pickadate.js v3.6.4 - Versione Accessibile WCAG 2.1 AA
 * http://amsul.github.io/pickadate.js/date.htm
 * Modifiche per accessibilità WCAG 2.1 AA e strict equality
 */
!function(a){"function"==typeof define&&define.amd?define(["./picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,f=a.$node[0],g=f.value,h=a.$node.data("value"),i=h||g,j=h?b.formatSubmit:b.format,k=function(){return f.currentStyle?"rtl"===f.currentStyle.direction:"rtl"===getComputedStyle(a.$root[0]).direction};c.settings=b,c.$node=a.$node,c.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return!0===a[0]?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),i?c.set("select",i,{format:j,defaultValue:!0}):c.set("select",null).set("highlight",c.item.now),c.key={40:7,38:-7,39:function(){return k()?-1:1},37:function(){return k()?1:-1},36:function(){return 1-c.item.highlight.date},35:function(){var a=c.item.highlight;return new Date(a.year,a.month+1,0).getDate()-a.date},33:function(){return"prevMonth"},34:function(){return"nextMonth"},go:function(a){var b,e=c.item.highlight;b="prevMonth"===a?new Date(e.year,e.month-1,Math.min(e.date,new Date(e.year,e.month,0).getDate())):"nextMonth"===a?new Date(e.year,e.month+1,Math.min(e.date,new Date(e.year,e.month+2,0).getDate())):new Date(e.year,e.month,e.date+a),c.set("highlight",b,{interval:a}),d(c,b),this.render()}},a.on("render",function(){a.$root.find("."+b.klass.selectMonth).on("change",function(){var c=this.value;if(c){a.set("highlight",[a.get("view").year,c,a.get("highlight").date]),a.$root.find("."+b.klass.selectMonth).trigger("focus");var d=a.get("highlight");e("Cambiato a "+b.monthsFull[c]+" "+d.year)}}),a.$root.find("."+b.klass.selectYear).on("change",function(){var c=this.value;if(c){a.set("highlight",[c,a.get("view").month,a.get("highlight").date]),a.$root.find("."+b.klass.selectYear).trigger("focus");a.get("highlight");e("Cambiato all'anno "+c)}})},1).on("open",function(){var d="";c.disabled(c.get("now"))&&(d=":not(."+b.klass.buttonToday+")"),a.$root.find("button"+d+", select").attr("disabled",!1),setTimeout(function(){var c=a.$root.find("."+b.klass.highlighted);c.length&&c.focus()},100)},1).on("close",function(){a.$root.find("button, select").attr("disabled",!0)},1)}function d(a,b){var c=a.settings;e("Navigato a "+c.weekdaysFull[b.getDay()]+", "+b.getDate()+" "+c.monthsFull[b.getMonth()]+" "+b.getFullYear())}function e(a){var b=document.getElementById("picker-live-region");b&&(b.textContent=a,setTimeout(function(){b.textContent=""},1e3))}var f=7,g=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"===a&&(a="select"),e[a]=b,d):(e["enable"===a?"disable":"flip"===a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"===a?d.set("highlight",e.select,c):"highlight"===a?d.set("view",e.highlight,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",e.select,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",e.highlight,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,d){var e,f=this;return c=void 0===c?a:c,c===-1/0||c===1/0?e=c:b.isPlainObject(c)&&g.isInteger(c.pick)?c=c.obj:Array.isArray(c)?(c=new Date(c[0],c[1],c[2]),c=g.isDate(c)?c:f.create().obj):c=g.isInteger(c)||g.isDate(c)?f.normalize(new Date(c),d):f.now(a,c,d),{year:e||c.getFullYear(),month:e||c.getMonth(),date:e||c.getDate(),day:e||c.getDay(),obj:e||c,pick:e||c.getTime()}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return!0===a||Array.isArray(a)||g.isDate(a)?d.create(a):a};return g.isInteger(a)||(a=e(a)),g.isInteger(c)||(c=e(c)),g.isInteger(a)&&b.isPlainObject(c)?a=[c.year,c.month,c.date+a]:g.isInteger(c)&&b.isPlainObject(a)&&(c=[a.year,a.month,a.date+c]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b,c){return b=new Date,c&&c.rel&&b.setDate(b.getDate()+c.rel),this.normalize(b,c)},c.prototype.navigate=function(a,c,d){var e,f,g,h,i=Array.isArray(c),j=b.isPlainObject(c),k=this.item.view;if(i||j){for(j?(f=c.year,g=c.month,h=c.date):(f=+c[0],g=+c[1],h=+c[2]),d&&d.nav&&k&&k.month!==g&&(f=k.year,g=k.month),e=new Date(f,g+(d&&d.nav?d.nav:0),1),f=e.getFullYear(),g=e.getMonth();new Date(f,g,h).getMonth()!==g;)h-=1;c=[f,g,h]}return c},c.prototype.normalize=function(a){return a.setHours(0,0,0,0),a},c.prototype.measure=function(a,b){var c=this;return g.isInteger(b)?b=c.now(a,b,{rel:b}):b?"string"==typeof b&&(b=c.parse(a,b)):b="min"===a?-1/0:1/0,b},c.prototype.viewset=function(a,b){return this.create([b.year,b.month,1])},c.prototype.validate=function(a,b,c){var d,e,f,h,i=this,j=b,k=c&&c.interval?c.interval:1,l=-1===i.item.enable,m=i.item.min,n=i.item.max,o=l&&i.item.disable.filter(function(a){if(Array.isArray(a)){var c=i.create(a).pick;c<b.pick?d=!0:c>b.pick&&(e=!0)}return g.isInteger(a)}).length;if((!c||!c.nav&&!c.defaultValue)&&(!l&&i.disabled(b)||l&&i.disabled(b)&&(o||d||e)||!l&&(b.pick<=m.pick||b.pick>=n.pick)))for(l&&!o&&(!e&&k>0||!d&&k<0)&&(k*=-1);i.disabled(b)&&(Math.abs(k)>1&&(b.month<j.month||b.month>j.month)&&(b=j,k=k>0?1:-1),b.pick<=m.pick?(f=!0,k=1,b=i.create([m.year,m.month,m.date+(b.pick===m.pick?0:-1)])):b.pick>=n.pick&&(h=!0,k=-1,b=i.create([n.year,n.month,n.date+(b.pick===n.pick?0:1)])),!f||!h);)b=i.create([b.year,b.month,b.date+k]);return b},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return g.isInteger(d)?a.day===(c.settings.firstDay?d:d-1)%7:Array.isArray(d)||g.isDate(d)?a.pick===c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0});return d=d.length&&!d.filter(function(a){return Array.isArray(a)&&"inverted"===a[3]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.parse=function(a,b,c){var d=this,e={};return b&&"string"==typeof b?(c&&c.format||(c=c||{},c.format=d.settings.format),d.formats.toArray(c.format).map(function(a){var c=d.formats[a],f=c?g.trigger(c,d,[b,e]):a.replace(/^!/,"").length;c&&(e[a]=b.substr(0,f)),b=b.substr(f)}),[e.yyyy||e.yy,+(e.mm||e.m)-1,e.dd||e.d]):b},c.prototype.formats=function(){function a(a,b,c){var d=a.match(/[^\x00-\x7F]+|[a-zA-Z0-9_\u0080-\u00FF]+/)[0];return c.mm||c.m||(c.m=b.indexOf(d)+1),d.length}function b(a){return a.match(/[a-zA-Z0-9_\u0080-\u00FF]+/)[0].length}return{d:function(a,b){return a?g.digits(a):b.date},dd:function(a,b){return a?2:g.lead(b.date)},ddd:function(a,c){return a?b(a):this.settings.weekdaysShort[c.day]},dddd:function(a,c){return a?b(a):this.settings.weekdaysFull[c.day]},m:function(a,b){return a?g.digits(a):b.month+1},mm:function(a,b){return a?2:g.lead(b.month+1)},mmm:function(b,c){var d=this.settings.monthsShort;return b?a(b,d,c):d[c.month]},mmmm:function(b,c){var d=this.settings.monthsFull;return b?a(b,d,c):d[c.month]},yy:function(a,b){return a?2:(""+b.year).slice(2)},yyyy:function(a,b){return a?4:b.year},toArray:function(a){return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return g.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}}}(),c.prototype.isDateExact=function(a,c){var d=this;return g.isInteger(a)&&g.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(g.isDate(a)||Array.isArray(a))&&(g.isDate(c)||Array.isArray(c))?d.create(a).pick===d.create(c).pick:!(!b.isPlainObject(a)||!b.isPlainObject(c))&&d.isDateExact(a.from,c.from)&&d.isDateExact(a.to,c.to)},c.prototype.isDateOverlap=function(a,c){var d=this,e=d.settings.firstDay?1:0;return g.isInteger(a)&&(g.isDate(c)||Array.isArray(c))?(a=a%7+e)===d.create(c).day+1:g.isInteger(c)&&(g.isDate(a)||Array.isArray(a))?(c=c%7+e)===d.create(a).day+1:!(!b.isPlainObject(a)||!b.isPlainObject(c))&&d.overlapRanges(a,c)},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1===b.enable?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"===c?d.flipEnable():!1===c?(d.flipEnable(1),e=[]):!0===c?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,f=0;f<e.length;f+=1)if(d.isDateExact(a,e[f])){c=!0;break}c||(g.isInteger(a)||g.isDate(a)||Array.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,f=e.length;return"flip"===c?d.flipEnable():!0===c?(d.flipEnable(1),e=[]):!1===c?(d.flipEnable(-1),e=[]):c.map(function(a){var c,h,i,j;for(i=0;i<f;i+=1){if(h=e[i],d.isDateExact(h,a)){c=e[i]=null,j=!0;break}if(d.isDateOverlap(h,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):Array.isArray(a)?(c=a,c[3]||c.push("inverted")):g.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;i<f;i+=1)if(d.isDateExact(e[i],a)){e[i]=null;break}if(j)for(i=0;i<f;i+=1)if(d.isDateOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.nodes=function(a){var b=this,c=b.settings,d=b.item,e=d.now,h=d.select,i=d.highlight,j=d.view,k=d.disable,l=d.min,m=d.max,n=function(a,b){return c.firstDay&&(a.push(a.shift()),b.push(b.shift())),g.node("thead",g.node("tr",g.group({min:0,max:f-1,i:1,node:"th",item:function(d){return['<abbr title="'+b[d]+'">'+a[d]+"</abbr>",c.klass.weekdays,'scope="col" role="columnheader" abbr="'+b[d]+'"']}})))}((c.showWeekdaysFull?c.weekdaysFull:c.weekdaysShort).slice(0),c.weekdaysFull.slice(0)),o=function(a){return g.node("button",a?c.labelMonthNext:c.labelMonthPrev,c.klass["nav"+(a?"Next":"Prev")]+(a&&j.year>=m.year&&j.month>=m.month||!a&&j.year<=l.year&&j.month<=l.month?" "+c.klass.navDisabled:""),'type="button" data-nav='+(a||-1)+" "+g.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+(a?c.labelMonthNext:c.labelMonthPrev)+'"'+(a&&j.year>=m.year&&j.month>=m.month||!a&&j.year<=l.year&&j.month<=l.month?" disabled":""))},p=function(){var d=c.showMonthsShort?c.monthsShort:c.monthsFull;return c.selectMonths?g.node("select",g.group({min:0,max:11,i:1,node:"option",item:function(a){return[d[a],0,"value="+a+(j.month===a?" selected":"")+(j.year===l.year&&a<l.month||j.year===m.year&&a>m.month?" disabled":"")]}}),c.klass.selectMonth,(a?"":"disabled")+" "+g.ariaAttr({controls:b.$node[0].id+"_table",label:"Seleziona mese"})+' title="'+c.labelMonthSelect+'"'):g.node("div",d[j.month],c.klass.month)},q=function(){var d=j.year,e=!0===c.selectYears?5:~~(c.selectYears/2);if(e){var f=l.year,h=m.year,i=d-e,k=d+e;if(f>i&&(k+=f-i,i=f),h<k){var n=i-f,o=k-h;i-=n>o?o:n,k=h}return g.node("select",g.group({min:i,max:k,i:1,node:"option",item:function(a){return[a,0,"value="+a+(d===a?" selected":"")]}}),c.klass.selectYear,(a?"":"disabled")+" "+g.ariaAttr({controls:b.$node[0].id+"_table",label:"Seleziona anno"})+' title="'+c.labelYearSelect+'"')}return g.node("div",d,c.klass.year)};return g.node("div",(c.selectYears?q()+p():p()+q())+o()+o(1),c.klass.header)+g.node("table",n+g.node("tbody",g.group({min:0,max:5,i:1,node:"tr",item:function(a){var d=c.firstDay&&0===b.create([j.year,j.month,1]).day?-7:0;return[g.group({min:f*a-j.day+d+1,max:function(){return this.min+f-1},i:1,node:"td",item:function(a){a=b.create([j.year,j.month,a+(c.firstDay?1:0)]);var d=h&&h.pick===a.pick,f=i&&i.pick===a.pick,n=k&&b.disabled(a)||a.pick<l.pick||a.pick>m.pick,o=g.trigger(b.formats.toString,b,[c.format,a]),p=c.id+"_"+a.pick,q=c.weekdaysFull[a.day]+", "+a.date+" "+c.monthsFull[a.month]+" "+a.year;return e.pick===a.pick&&(q+=", oggi"),d&&(q+=", selezionato"),n&&(q+=", non disponibile"),[g.node("button",a.date,function(b){return b.push(j.month===a.month?c.klass.infocus:c.klass.outfocus),e.pick===a.pick&&b.push(c.klass.now),d&&b.push(c.klass.selected),f&&b.push(c.klass.highlighted),n&&b.push(c.klass.disabled),b.join(" ")}([c.klass.day]),'type="button" data-pick='+a.pick+" id="+p+" "+g.ariaAttr({label:q,selected:!(!d||b.$node.val()!==o)||null,disabled:!!n||null,current:e.pick===a.pick?"date":null})+(n?"":' tabindex="'+(f?"0":"-1")+'"')),"",g.ariaAttr({role:"gridcell"})]}})]}})),c.klass.table,'id="'+b.$node[0].id+'_table" '+g.ariaAttr({role:"grid",controls:b.$node[0].id,readonly:!0,label:"Calendario: usa i tasti freccia per navigare"}),g.ariaAttr({role:"rowgroup"}))+g.node("div",g.node("button",c.today,c.klass.buttonToday,"type=button data-pick="+e.pick+(a&&!b.disabled(e)?"":" disabled")+" "+g.ariaAttr({controls:b.$node[0].id,label:"Seleziona oggi"}))+g.node("button",c.clear,c.klass.buttonClear,"type=button data-clear=1"+(a?"":" disabled")+" "+g.ariaAttr({controls:b.$node[0].id,label:"Cancella selezione"}))+g.node("button",c.close,c.klass.buttonClose,"type=button data-close=true "+(a?"":" disabled")+" "+g.ariaAttr({controls:b.$node[0].id,label:"Chiudi calendario"})),c.klass.footer,g.ariaAttr({role:"region"}))},c.defaults=function(a){return{labelMonthNext:"Mese successivo",labelMonthPrev:"Mese precedente",labelMonthSelect:"Seleziona un mese",labelYearSelect:"Seleziona un anno",monthsFull:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],weekdaysFull:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],weekdaysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],today:"Oggi",clear:"Cancella",close:"Chiudi",closeOnSelect:!0,closeOnClear:!0,updateInput:!0,format:"d mmmm, yyyy",klass:{table:a+"table",header:a+"header",navPrev:a+"nav--prev",navNext:a+"nav--next",navDisabled:a+"nav--disabled",month:a+"month",year:a+"year",selectMonth:a+"select--month",selectYear:a+"select--year",weekdays:a+"weekday",day:a+"day",disabled:a+"day--disabled",selected:a+"day--selected",highlighted:a+"day--highlighted",now:a+"day--today",infocus:a+"day--infocus",outfocus:a+"day--outfocus",footer:a+"footer",buttonClear:a+"button--clear",buttonToday:a+"button--today",buttonClose:a+"button--close"}}}(a.klasses().picker+"__"),a.extend("pickadate",c)});